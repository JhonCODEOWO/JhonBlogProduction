import{A as t1,B as B1,C as G1,D as O1,a as c1,b as w1,c as A1,d as k1,e as Z1,f as g,g as T1,h as D1,i as e1,j as R1,k as A,l as W,m as f1,n as N,o as B,p as G,q as F,r as E,s as O,t as I,u as J,v as j1,w as a1,x as U1,y as W1,z as i1}from"./chunk-IK4Y6HVN.js";import{Bb as T,Cb as $,Da as P,Eb as g1,Fb as N1,Ga as l,Ha as h,Ia as b1,J as v1,Ka as x1,M as q,Ma as H1,N as K,Oa as V1,R as _,S as C1,W as u,Wa as z,X as Q,Ya as m,Z as d1,ab as o,bb as t,bc as S1,ca as C,cb as v,da as d,g as m1,gb as k,ja as M1,jb as y,jc as _1,kb as f,kc as w,mc as y1,qa as u1,rb as j,sb as r,tb as Z,ub as U,uc as q1,vb as L1,vc as F1,wb as H,xb as V,xc as E1,yb as L,yc as I1,zc as P1}from"./chunk-TJZ46FM3.js";import"./chunk-6MDQTQU3.js";var J1=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275cmp=u({type:e,selectors:[["app-main"]],decls:1,vars:0,consts:[[1,"min-h-screen"]],template:function(a,i){a&1&&v(0,"div",0)}})}return e})();var b=(()=>{class e{toastService;csrfService;httpClient;constructor(c,a,i){this.toastService=c,this.csrfService=a,this.httpClient=i}userLogged=new m1(this.getPermanentSession());userLogged$=this.userLogged.asObservable();userPermissions=new m1(null);userPermissions$=this.userPermissions.asObservable();url="http://192.168.1.70:8088/api/user";login(c,a){let i={"X-CSRF-TOKEN":this.csrfService.tokenActual},s={email:c,password:a};return this.httpClient.post(`${this.url}/login`,s,{headers:i})}logout(){let c={"X-CSRF-TOKEN":this.csrfService.tokenActual};return this.httpClient.delete(`${this.url}/logout`,{headers:c})}isAutenticated(){return this.userLogged.getValue()!=null}matchWithUserLogged(c){return this.userLogged.getValue()!=null?this.userLogged.getValue()?.id===c.id:!1}setUser(c){this.userLogged.next(c)}setPermissions(c){let a=[];c.roles.forEach(i=>{i.permissions.forEach(s=>{a.some(p=>p.id==s.id)||a.push(s)})}),this.userPermissions.next(a)}setProfile(c){let a=this.userLogged.getValue();a?(a.profile=c,this.userLogged.next(a)):this.toastService.error("No se ha podido asignar correctamente el perfil al usuario")}getPermanentSession(){let c=localStorage.getItem("user");return c?JSON.parse(c):null}setPermanentSession(c){localStorage.setItem("user",JSON.stringify(c))}clearSession(){localStorage.removeItem("user"),this.userLogged.next(null),this.userPermissions.next(null)}static \u0275fac=function(a){return new(a||e)(_(g),_(N),_(c1))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})();var s2=()=>["/createacount"];function m2(e,n){if(e&1&&(o(0,"p",18),r(1),t()),e&2){let c=f();l(),Z(c.message)}}function f2(e,n){e&1&&(o(0,"p"),r(1,"Coloca un correo electr\xF3nico para proceder"),t())}function z2(e,n){e&1&&(o(0,"p"),r(1,"Coloca una contrase\xF1a para proceder"),t())}var X1=(()=>{class e{toastService;loginService;router;csrf;constructor(c,a,i,s){this.toastService=c,this.loginService=a,this.router=i,this.csrf=s}email;password;message="";permanent_session=!1;ngOnInit(){}login(){this.validarDatos()?this.loginService.login(this.email,this.password).subscribe({next:c=>{"name"in c?(this.loginService.setUser(c),this.loginService.setPermissions(c),this.csrf.getCsrfToken(),this.message="",this.router.navigate(["/"])):this.message=c.message},error:c=>{this.toastService.error("Ha ocurrido un error al realizar la solicitud con el servidor para el login: "+c.status)}}):this.toastService.error("No se puede iniciar sesi\xF3n si no has colocado todos los datos")}onSubmit(c){if(!c.valid){this.toastService.error("No se puede realizar la operaci\xF3n, no has ingresado los datos requeridos");return}this.login()}validarDatos(){return!(this.email==""||this.password==""||!this.email||!this.password)}applyPermanentSession(){this.permanent_session?this.permanent_session=!1:this.permanent_session=!0}static \u0275fac=function(a){return new(a||e)(h(g),h(b),h(A),h(N))};static \u0275cmp=u({type:e,selectors:[["app-login"]],decls:28,vars:8,consts:[["FLogin","ngForm"],[1,"flex","justify-center","mt-8","mb-8"],["action","",1,"bg-slate-500","dark:bg-neutral-800","text-black","dark:text-white","p-8","w-2/5",3,"ngSubmit"],[1,"font-black","text-4xl"],["class","text-red-500",4,"ngIf"],[1,"mt-3","flex","flex-col","gap-y-3","font-light","text-lg"],[1,"flex","flex-col"],["for","email"],["type","email","required","","id","email","name","email",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],[4,"ngIf"],["for","password"],["type","password","required","","id","password","name","password",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-3","underline"],[3,"routerLink"],["type","submit",1,"mt-8","w-full","bg-sky-400","dark:bg-blue-600","p-3","disabled:bg-blue-950","disabled:line-through",3,"disabled"],[1,"flex","flex-row-reverse","items-center","gap-x-3","mt-3"],["type","checkbox","name","permanent_session","id","permanent_session",3,"click"],["for",""],[1,"text-red-500"]],template:function(a,i){if(a&1){let s=k();o(0,"div",1)(1,"form",2,0),y("ngSubmit",function(){C(s);let M=j(2);return d(i.onSubmit(M))}),o(3,"h2",3),r(4,"Inicio de sesi\xF3n"),t(),z(5,m2,2,1,"p",4),o(6,"div",5)(7,"div",6)(8,"label",7),r(9,"Email:"),t(),o(10,"input",8),L("ngModelChange",function(M){return C(s),V(i.email,M)||(i.email=M),d(M)}),t(),z(11,f2,2,0,"p",9),t(),o(12,"div",6)(13,"label",10),r(14,"Contrase\xF1a:"),t(),o(15,"input",11),L("ngModelChange",function(M){return C(s),V(i.password,M)||(i.password=M),d(M)}),t(),z(16,z2,2,0,"p",9),t()(),o(17,"div",12)(18,"a"),r(19,"\xBFOlvidaste tu contrase\xF1a?"),t(),o(20,"a",13),r(21,"Crear cuenta nueva"),t()(),o(22,"button",14),r(23,"Iniciar sesi\xF3n"),t(),o(24,"div",15)(25,"input",16),y("click",function(){return C(s),d(i.applyPermanentSession())}),t(),o(26,"label",17),r(27,"\xBFMantener sesi\xF3n abierta?"),t()()()()}a&2&&(l(5),m("ngIf",i.message!=""),l(5),H("ngModel",i.email),l(),m("ngIf",i.email==""),l(4),H("ngModel",i.password),l(),m("ngIf",i.password==""),l(4),m("routerLink",T(7,s2)),l(2),m("disabled",!i.validarDatos()))},dependencies:[w,W,I,B,G,F,J,O,E]})}return e})();var R=(()=>{class e{loginService;router;constructor(c,a){this.loginService=c,this.router=a}canActivate(c,a){return this.loginService.isAutenticated()?!0:(this.router.navigate(["login"]),!1)}static \u0275fac=function(a){return new(a||e)(_(b),_(A))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})();function p2(e,n){e&1&&(o(0,"p",18),r(1,"Coloca un nombre para la cuenta (Este nombre no ser\xE1 p\xFAblico)"),t())}function v2(e,n){if(e&1&&(o(0,"p",20),r(1),t()),e&2){let c=n.$implicit;l(),U(" ",c,"")}}function C2(e,n){if(e&1&&(o(0,"div"),z(1,v2,2,1,"p",19),t()),e&2){let c=f(2);l(),m("ngForOf",c.errors.name)}}function d2(e,n){e&1&&(o(0,"p",18),r(1,"Coloca un correo electr\xF3nico para proceder"),t())}function M2(e,n){if(e&1&&(o(0,"p",20),r(1),t()),e&2){let c=n.$implicit;l(),U(" ",c,"")}}function u2(e,n){if(e&1&&(o(0,"div"),z(1,M2,2,1,"p",19),t()),e&2){let c=f(2);l(),m("ngForOf",c.errors.email)}}function b2(e,n){e&1&&(o(0,"p",18),r(1,"Coloca una contrase\xF1a para proceder"),t())}function x2(e,n){if(e&1&&(o(0,"p",20),r(1),t()),e&2){let c=n.$implicit;l(),U(" ",c,"")}}function H2(e,n){if(e&1&&(o(0,"div"),z(1,x2,2,1,"p",19),t()),e&2){let c=f(2);l(),m("ngForOf",c.errors.password)}}function V2(e,n){e&1&&(o(0,"p",18),r(1,"Repite la contrase\xF1a que has asignado anteriormente"),t())}function L2(e,n){e&1&&(o(0,"p",18),r(1,"Las contrase\xF1as no coinciden"),t())}function g2(e,n){e&1&&(o(0,"button",21),r(1,"Crear cuenta"),t())}function N2(e,n){if(e&1){let c=k();o(0,"form",3,0),y("ngSubmit",function(){C(c);let i=j(1),s=f();return d(s.onSubmit(i))}),o(2,"h2",4),r(3,"Crear cuenta"),t(),o(4,"p"),r(5,"Asegurate de llenar todos los campos para poder proceder"),t(),o(6,"div",5)(7,"div",6)(8,"label",7),r(9,"Nombre o alias para la cuenta:"),t(),o(10,"input",8),L("ngModelChange",function(i){C(c);let s=f();return V(s.name,i)||(s.name=i),d(i)}),t(),z(11,p2,2,0,"p",9)(12,C2,2,1,"div",10),t(),o(13,"div",6)(14,"label",11),r(15,"Email:"),t(),o(16,"input",12),L("ngModelChange",function(i){C(c);let s=f();return V(s.email,i)||(s.email=i),d(i)}),t(),z(17,d2,2,0,"p",9)(18,u2,2,1,"div",10),t(),o(19,"div",6)(20,"label",13),r(21,"Contrase\xF1a:"),t(),o(22,"input",14),L("ngModelChange",function(i){C(c);let s=f();return V(s.password,i)||(s.password=i),d(i)}),t(),z(23,b2,2,0,"p",9)(24,H2,2,1,"div",10),t(),o(25,"div",6)(26,"label",15),r(27,"Repite la contrase\xF1a:"),t(),o(28,"input",16),L("ngModelChange",function(i){C(c);let s=f();return V(s.password_confirmation,i)||(s.password_confirmation=i),d(i)}),t(),z(29,V2,2,0,"p",9)(30,L2,2,0,"p",9),t()(),z(31,g2,2,0,"button",17),t()}if(e&2){let c=f();l(10),H("ngModel",c.name),l(),m("ngIf",c.name==""),l(),m("ngIf",c.errors.name),l(4),H("ngModel",c.email),l(),m("ngIf",c.email==""),l(),m("ngIf",c.errors.email),l(4),H("ngModel",c.password),l(),m("ngIf",c.password==""),l(),m("ngIf",c.errors.password),l(4),H("ngModel",c.password_confirmation),l(),m("ngIf",c.password_confirmation==""),l(),m("ngIf",c.password!=c.password_confirmation),l(),m("ngIf",c.validarDatos())}}var Y1=(()=>{class e{userService;toastService;router;constructor(c,a,i){this.userService=c,this.toastService=a,this.router=i}creatingAcount=!0;email;password;name;password_confirmation;errors=[];onSubmit(c){return c.valid?(this.createUser(),!0):!1}createUser(){this.userService.addUser(this.name,this.email,this.password).subscribe({next:c=>{c.status=="ok"?this.router.navigate(["/login"]):this.toastService.error(c.message)},error:c=>{c.status==422&&(this.errors=c.error.errors,setTimeout(()=>{this.errors=[]},5e3))}})}validarDatos(){return!!(this.email&&this.password&&this.name&&this.password_confirmation!=""&&this.password==this.password_confirmation)}static \u0275fac=function(a){return new(a||e)(h(i1),h(g),h(A))};static \u0275cmp=u({type:e,selectors:[["app-createacount"]],decls:2,vars:1,consts:[["FCreate","ngForm"],[1,"flex","justify-center","mt-8"],["action","","class","bg-slate-500 dark:bg-neutral-800 text-black dark:text-white p-8 w-2/5 overflow-auto","style","height: 30rem;",3,"ngSubmit",4,"ngIf"],["action","",1,"bg-slate-500","dark:bg-neutral-800","text-black","dark:text-white","p-8","w-2/5","overflow-auto",2,"height","30rem",3,"ngSubmit"],[1,"font-black","text-4xl"],[1,"mt-3","flex","flex-col","gap-y-3","font-light","text-lg"],[1,"flex","flex-col"],["for","name"],["type","text","required","","id","name","name","name",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["class","text-sm font-normal",4,"ngIf"],[4,"ngIf"],["for","email"],["type","email","required","","id","email","name","email",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["for","password"],["type","password","required","","id","password","name","password",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["for","password_confirmation"],["type","password","required","","id","password_confirmation","name","password_confirmation",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["type","submit","class","mt-3 p-3 bg-blue-800",4,"ngIf"],[1,"text-sm","font-normal"],["class","text-sm font-normal text-yellow-400",4,"ngFor","ngForOf"],[1,"text-sm","font-normal","text-yellow-400"],["type","submit",1,"mt-3","p-3","bg-blue-800"]],template:function(a,i){a&1&&(o(0,"div",1),z(1,N2,32,13,"form",2),t()),a&2&&(l(),m("ngIf",i.creatingAcount))},dependencies:[_1,w,I,B,G,F,J,O,E]})}return e})();var l1=class{id;name;last_name;profile_photo;biography;user=null;created_at;updated_at;constructor(n=null,c=null,a=null,i=null,s=null,p=null,M=null,s1=null){this.id=n,this.name=c,this.last_name=a,this.profile_photo=i,this.biography=s,this.created_at=p,this.updated_at=M,this.user=s1}};var S=class{static findPermission(n,c){return c!=null?c.some(a=>a.name==n):!1}static getUrlServer(){return"http://localhost:8088"}static getUrlResourceFromServer(n,c){return`${n}/${c}`}};var r1=(()=>{class e{httpClient;csrf;loginService;constructor(c,a,i){this.httpClient=c,this.csrf=a,this.loginService=i}url="http://localhost:8088/api/profile";createProfile(c,a){let i=new FormData,s=this.loginService.userLogged.getValue()?.id;a&&s&&(i.append("name",c.name??""),i.append("last_name",c.last_name??""),i.append("biography",c.biography??""),i.append("profile_photo",a??""),i.append("user_id",s.toString()));let p={"X-CSRF-TOKEN":this.csrf.tokenActual};return this.httpClient.post(`${this.url}/create`,i,{headers:p})}modifyProfile(c,a=null){let i={"X-CSRF-TOKEN":this.csrf.tokenActual},s=new FormData,p=this.loginService.userLogged.getValue()?.id;return s.append("_method","PUT"),p&&(s.append("name",c.name??""),s.append("last_name",c.last_name??""),s.append("biography",c.biography??""),a&&s.append("profile_photo",a),s.append("user_id",p.toString())),console.log(s),this.httpClient.post(`${this.url}/${c.id}/modify`,s,{headers:i})}static \u0275fac=function(a){return new(a||e)(_(c1),_(N),_(b))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})();function _2(e,n){if(e&1&&(o(0,"div",21)(1,"label"),r(2,"Imagen actual de perfil"),t(),v(3,"img",10),t()),e&2){let c=f(2);l(3),m("src",c.getResourceFromServer(c.profile.profile_photo),P)}}function y2(e,n){e&1&&(o(0,"span"),r(1,"(No obligatorio)"),t())}function w2(e,n){e&1&&(o(0,"p",22),r(1,"Coloca un nombre para la cuenta (Este nombre no ser\xE1 p\xFAblico)"),t())}function A2(e,n){e&1&&(o(0,"p",22),r(1,"Coloca un nombre para la cuenta (Este nombre no ser\xE1 p\xFAblico)"),t())}function k2(e,n){e&1&&(o(0,"p",22),r(1,"Coloca un nombre para la cuenta (Este nombre no ser\xE1 p\xFAblico)"),t())}function Z2(e,n){e&1&&(o(0,"button",23),r(1,"Crear cuenta"),t())}function q2(e,n){e&1&&(o(0,"button",24),r(1,"Modificar datos"),t())}function F2(e,n){if(e&1){let c=k();o(0,"form",4,0),y("ngSubmit",function(){C(c);let i=j(1),s=f();return d(s.onSubmit(i))}),o(2,"h2",5),r(3),t(),o(4,"p"),r(5,"Los datos ingresados aqu\xED ser\xE1n p\xFAblicos."),t(),o(6,"div",6),z(7,_2,4,1,"div",7),o(8,"div",8)(9,"label",9),r(10,"Foto de perfil "),z(11,y2,2,0,"span",3),t(),v(12,"img",10),o(13,"input",11),y("change",function(i){C(c);let s=f();return d(s.onFileSelected(i))}),t()(),o(14,"div",8)(15,"label",12),r(16,"Nombre:"),t(),o(17,"input",13),L("ngModelChange",function(i){C(c);let s=f();return V(s.profile.name,i)||(s.profile.name=i),d(i)}),t(),z(18,w2,2,0,"p",14),t(),o(19,"div",8)(20,"label",15),r(21,"Apellidos:"),t(),o(22,"input",16),L("ngModelChange",function(i){C(c);let s=f();return V(s.profile.last_name,i)||(s.profile.last_name=i),d(i)}),t(),z(23,A2,2,0,"p",14),t(),o(24,"div",8)(25,"label",17),r(26,"Escribe una peque\xF1a biograf\xEDa sobre ti:"),t(),o(27,"textarea",18),L("ngModelChange",function(i){C(c);let s=f();return V(s.profile.biography,i)||(s.profile.biography=i),d(i)}),t(),z(28,k2,2,0,"p",14),t()(),z(29,Z2,2,0,"button",19)(30,q2,2,0,"button",20),t()}if(e&2){let c=f();l(3),Z(c.title),l(4),m("ngIf",c.editing),l(4),m("ngIf",c.editing),l(),m("src",c.imagen_url,P),l(5),H("ngModel",c.profile.name),l(),m("ngIf",c.profile.name==""),l(4),H("ngModel",c.profile.last_name),l(),m("ngIf",c.profile.last_name==""),l(4),H("ngModel",c.profile.biography),l(),m("ngIf",c.profile.biography==""),l(),m("ngIf",c.validarDatosOnCreate()&&c.editing==!1),l(),m("ngIf",c.validarDatosOnEdit()&&c.editing==!0)}}function E2(e,n){e&1&&(o(0,"div")(1,"p"),r(2,"El usuario no se ha podido encontrar"),t()())}var h1=(()=>{class e{profileService;toastService;router;route;loginService;constructor(c,a,i,s,p){this.profileService=c,this.toastService=a,this.router=i,this.route=s,this.loginService=p}title="Crear perfil para la cuenta";profile=null;imagen_perfil=null;imagen_url=null;errors=[];editing=!1;ngOnInit(){if(this.route.snapshot.params.id){let a=this.loginService.userLogged.getValue();a&&(this.title="Modificando perfil",this.profile=a.profile,this.editing=!0)}else this.profile=new l1}onSubmit(c){if(c.valid){switch(this.editing){case!1:this.createProfile();break;case!0:this.editProfile();break;default:break}return!0}return!1}onFileSelected(c){let i=c.currentTarget.files;if(i){this.imagen_perfil=i[0];let s=new FileReader;s.onload=()=>{this.imagen_url=s.result},s.readAsDataURL(i[0])}}validarDatosOnCreate(){return!!(this.profile&&this.profile.name&&this.profile.biography&&this.profile.last_name!=""&&this.imagen_perfil!=null)}validarDatosOnEdit(){return!!(this.profile&&this.profile.name&&this.profile.biography&&this.profile.last_name!="")}createProfile(){this.imagen_perfil&&this.profile?this.profileService.createProfile(this.profile,this.imagen_perfil).subscribe({next:c=>{"status"in c?this.toastService.error(c.message):(this.loginService.setProfile(c),this.router.navigate([""]))},error:c=>{switch(c.status){case 422:break;case 403:this.toastService.error("No se tiene el permiso para realizar la petici\xF3n");break;default:break}}}):this.toastService.warning("No se puede proceder, selecciona una imagen de perfil")}editProfile(){this.profile&&this.profileService.modifyProfile(this.profile,this.imagen_perfil).subscribe({next:c=>{"status"in c?this.toastService.success(`Ha ocurrido un error mientras se realizaba la solicitud ${c.message}`):(this.loginService.setProfile(c),this.router.navigate([""]))},error:c=>{this.toastService.error(`Ha ocurrido un error al procesar la solicitud ${c.status}`)}})}getResourceFromServer(c){if(c){let a=S.getUrlServer();return S.getUrlResourceFromServer(a,c)}return""}static \u0275fac=function(a){return new(a||e)(h(r1),h(g),h(A),h(e1),h(b))};static \u0275cmp=u({type:e,selectors:[["app-createprofile"]],decls:3,vars:2,consts:[["FProfile","ngForm"],[1,"flex","justify-center","mt-8","mb-8"],["action","","class","bg-slate-500 dark:bg-neutral-800 text-black dark:text-white p-8 w-2/5 overflow-auto","style","height: 30rem;",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["action","",1,"bg-slate-500","dark:bg-neutral-800","text-black","dark:text-white","p-8","w-2/5","overflow-auto",2,"height","30rem",3,"ngSubmit"],[1,"font-black","text-4xl"],[1,"mt-3","flex","flex-col","gap-y-3","font-light","text-lg"],["class","flex flex-col text-center",4,"ngIf"],[1,"flex","flex-col"],["for","imagen_perfil"],["alt","",1,"rounded-full","w-36",3,"src"],["type","file","name","imagen_perfil","id","imagen_perfil","required","",3,"change"],["for","name"],["type","text","required","","id","name","name","name",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["class","text-sm font-normal",4,"ngIf"],["for","last_name"],["type","text","required","","id","last_name","name","last_name",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["for","biography"],["name","biography","id","biography","name","biografia","required","","rows","10",1,"focus:outline-none","bg-slate-300","dark:bg-neutral-700","p-1",3,"ngModelChange","ngModel"],["type","submit","class","mt-3 p-3 bg-blue-800",4,"ngIf"],["type","submit","class","mt-3 p-3 bg-yellow-800",4,"ngIf"],[1,"flex","flex-col","text-center"],[1,"text-sm","font-normal"],["type","submit",1,"mt-3","p-3","bg-blue-800"],["type","submit",1,"mt-3","p-3","bg-yellow-800"]],template:function(a,i){a&1&&(o(0,"div",1),z(1,F2,31,12,"form",2)(2,E2,3,0,"div",3),t()),a&2&&(l(),m("ngIf",i.profile),l(),m("ngIf",!i.profile))},dependencies:[w,I,B,G,F,J,O,E]})}return e})();var I2=e=>["/profile/edit",e];function P2(e,n){if(e&1&&(o(0,"button",13),r(1,"Modificar perfil"),t()),e&2){let c=f(2);m("routerLink",$(1,I2,c.user.id))}}function T2(e,n){e&1&&(o(0,"button",14),r(1,"Seguir"),t())}function D2(e,n){if(e&1&&(o(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),r(5),t(),o(6,"h4",5),r(7),t(),o(8,"h5",6),r(9),g1(10,"date"),t()(),z(11,P2,2,3,"button",7)(12,T2,2,0,"button",8),t(),o(13,"div"),v(14,"img",9),t()(),o(15,"div",10)(16,"div")(17,"h3",11),r(18,"Biograf\xEDa"),t(),o(19,"p",12),r(20),t()()()()),e&2){let c=f();l(5),L1("",c.user.profile.name," ",c.user.profile.last_name,""),l(2),Z(c.user.email),l(2),U("Unido en: ",N1(10,8,c.user.created_at),""),l(2),m("ngIf",c.isCurrentUser),l(),m("ngIf",!c.isCurrentUser&&c.isLogged),l(2),m("src",c.getResourceFromServer(c.user.profile.profile_photo),P),l(6),Z(c.user.profile.biography)}}function R2(e,n){e&1&&(o(0,"div")(1,"p"),r(2,"Este usuario a\xFAn no ha creado su perfil p\xFAblico, espera a que termine su creaci\xF3n de perfil"),t()())}function j2(e,n){e&1&&v(0,"app-notfound")}var K1=(()=>{class e{userService;route;loginService;constructor(c,a,i){this.userService=c,this.route=a,this.loginService=i}user=null;isCurrentUser=!1;notFound=!0;isLogged=!1;ngOnInit(){let c=this.route.snapshot.params.id;this.userService.getUser(c).subscribe({next:a=>{this.user=a,this.loginService.matchWithUserLogged(a)?this.isCurrentUser=!0:this.isCurrentUser=!1,this.loginService.isAutenticated()?this.isLogged=!0:this.isLogged=!1},error:a=>{switch(a.status){case 404:this.notFound=!1;break;default:break}}})}getResourceFromServer(c){if(c){let a=S.getUrlServer();return S.getUrlResourceFromServer(a,c)}return""}static \u0275fac=function(a){return new(a||e)(h(i1),h(e1),h(b))};static \u0275cmp=u({type:e,selectors:[["app-view-profile"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"p-12","flex","justify-between","bg-blue-950"],[1,"flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","gap-y-2"],[1,"font-black","text-5xl"],[1,"w-full","text-start","text-3xl"],[1,"w-full","text-start","text-xl"],["class","bg-green-600 p-2 mt-7 w-full",3,"routerLink",4,"ngIf"],["class","bg-sky-600 p-2 mt-7 w-full",4,"ngIf"],["alt","",1,"w-40","rounded-full",3,"src"],[1,"p-3"],[1,"text-4xl","font-semibold"],[1,"text-2xl","font-normal","whitespace-pre","p-5"],[1,"bg-green-600","p-2","mt-7","w-full",3,"routerLink"],[1,"bg-sky-600","p-2","mt-7","w-full"]],template:function(a,i){a&1&&(o(0,"div"),z(1,D2,21,10,"div",0)(2,R2,3,0,"div",0)(3,j2,1,0,"app-notfound",0),t()),a&2&&(l(),m("ngIf",i.user&&i.user.profile),l(),m("ngIf",!i.user||!i.user.profile),l(),m("ngIf",!i.notFound))},dependencies:[w,W,a1,y1]})}return e})();var U2=[{path:"",component:J1},{path:"login",component:X1},{path:"profile/view/:id",component:K1},{path:"createacount",canActivate:[R],component:Y1},{path:"createprofile",canActivate:[R],component:h1},{path:"profile/edit/:id",canActivate:[R],component:h1},{path:"admin",canActivate:[R],loadChildren:()=>import("./chunk-2I5IDUT4.js").then(e=>e.AdministracionModule)},{path:"user",children:[{path:"modify/:id",component:G1}]},{path:"**",component:a1}],Q1=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=Q({type:e});static \u0275inj=K({imports:[f1.forRoot(U2),f1]})}return e})();var B2=()=>[""],G2=()=>["login"],O2=()=>["admin/index"],J2=e=>["/profile/view",e],X2=()=>["/createprofile"];function Y2(e,n){e&1&&(o(0,"ul",7)(1,"li")(2,"a",8),r(3,"Iniciar sesi\xF3n"),t()(),o(4,"li"),r(5,"Acerca de..."),t()()),e&2&&(l(2),m("routerLink",T(1,G2)))}function K2(e,n){if(e&1&&v(0,"fa-icon",14),e&2){let c=f(2);m("icon",c.faCaredDown)}}function Q2(e,n){if(e&1&&v(0,"fa-icon",14),e&2){let c=f(2);m("icon",c.faCaredUp)}}function $2(e,n){e&1&&(o(0,"a",8),r(1,"Administraci\xF3n"),t()),e&2&&m("routerLink",T(1,O2))}function c3(e,n){if(e&1&&(o(0,"a",8),r(1,"Visualizar perfil"),t()),e&2){let c=f(3);m("routerLink",$(1,J2,c.actualUser==null?null:c.actualUser.id))}}function e3(e,n){e&1&&(o(0,"a",8),r(1,"Crear perfil"),t()),e&2&&m("routerLink",T(1,X2))}function a3(e,n){if(e&1){let c=k();o(0,"div",15),z(1,$2,2,2,"a",16)(2,c3,2,3,"a",16)(3,e3,2,2,"a",16),o(4,"li",17),y("click",function(){C(c);let i=f(2);return d(i.deslogear())}),r(5,"Cerrar sesi\xF3n"),t()()}if(e&2){let c=f(2);m("@fadeInOut",void 0),l(),m("ngIf",c.findPermission("admin_access")),l(),m("ngIf",c.actualUser==null?null:c.actualUser.profile),l(),m("ngIf",!(c.actualUser!=null&&c.actualUser.profile))}}function i3(e,n){if(e&1){let c=k();o(0,"ul",7)(1,"li",9)(2,"p",10),y("click",function(){C(c);let i=f();return d(i.showMenu())}),v(3,"img",11),o(4,"span"),r(5),t(),z(6,K2,1,1,"fa-icon",12)(7,Q2,1,1,"fa-icon",12),t(),z(8,a3,6,4,"div",13),t(),o(9,"li"),r(10,"Acerca de..."),t()()}if(e&2){let c=f();l(3),m("src",c.getImageFromServer(c.actualUser==null||c.actualUser.profile==null?null:c.actualUser.profile.profile_photo),P),l(2),Z(c.actualUser==null?null:c.actualUser.name),l(),m("ngIf",c.menuVisible==!1),l(),m("ngIf",c.menuVisible==!0),l(),m("ngIf",c.menuVisible)}}var $1=(()=>{class e{loginService;toastService;csrf;router;constructor(c,a,i,s){this.loginService=c,this.toastService=a,this.csrf=i,this.router=s}faCaredDown=W1;faCaredUp=U1;role="";logeado;actualUser;userPermissions;menuVisible=!1;deslogear(){this.loginService.logout().subscribe({next:c=>{c.status=="ok"&&(this.logeado=!1,this.loginService.clearSession(),this.csrf.getCsrfToken(),this.toastService.warning(c.message),this.router.navigate([""]))},error:c=>{this.toastService.error(`Ha ocurrido un error al llevar a cabo esta acci\xF3n: ${c.status}`)}})}showMenu(){this.menuVisible?this.menuVisible=!1:this.menuVisible=!0}getImageFromServer(c){if(c){let a=S.getUrlServer();return S.getUrlResourceFromServer(a,c)}return""}findPermission(c){return S.findPermission(c,this.userPermissions)}static \u0275fac=function(a){return new(a||e)(h(b),h(g),h(N),h(A))};static \u0275cmp=u({type:e,selectors:[["app-header"]],inputs:{logeado:"logeado",actualUser:"actualUser",userPermissions:"userPermissions"},decls:11,vars:4,consts:[[1,"bg-slate-300","dark:bg-black","text-black","dark:text-white","flex","justify-between","pt-2","pb-2"],[1,"flex","flex-col","items-center","p-3",3,"routerLink"],[1,"text-3xl","w-full"],[1,"font-black"],[1,"font-light","text-xl"],[1,"flex","items-center","pr-3","ol-3"],["class","flex justify-between gap-6 text-xl font-normal",4,"ngIf"],[1,"flex","justify-between","gap-6","text-xl","font-normal"],[3,"routerLink"],[1,"cursor-pointer"],[1,"flex","gap-x-4",3,"click"],["alt","",1,"w-8","rounded-full",3,"src"],[3,"icon",4,"ngIf"],["class","absolute bg-slate-300 dark:bg-black z-10 flex flex-col",4,"ngIf"],[3,"icon"],[1,"absolute","bg-slate-300","dark:bg-black","z-10","flex","flex-col"],[3,"routerLink",4,"ngIf"],[1,"text-red-500","cursor-pointer",3,"click"]],template:function(a,i){a&1&&(o(0,"header",0)(1,"a",1)(2,"p",2),r(3,"Jhon"),o(4,"span",3),r(5,"Blog"),t()(),o(6,"p",4),r(7,"Tu sitio de inter\xE9s"),t()(),o(8,"nav",5),z(9,Y2,6,2,"ul",6)(10,i3,11,5,"ul",6),t()()),a&2&&(l(),m("routerLink",T(3,B2)),l(8),m("ngIf",i.logeado==!1),l(),m("ngIf",i.logeado==!0))},dependencies:[w,W,t1],data:{animation:[q1("fadeInOut",[I1("void",E1({opacity:0})),P1(":enter, :leave",[F1(300)])])]}})}return e})();var c2={prefix:"fab",iconName:"x-twitter",icon:[512,512,[],"e61b","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"]};var e2={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]};var a2={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]};var i2={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var t2=(()=>{class e{faFacebook=a2;faInstagram=e2;faGithub=i2;faXTwitter=c2;static \u0275fac=function(a){return new(a||e)};static \u0275cmp=u({type:e,selectors:[["app-footer"]],decls:39,vars:4,consts:[[1,"bg-slate-200","dark:bg-black/50","pt-20"],[1,"flex","justify-between","pl-3","pr-3"],[1,"uppercase","font-bold","text-3xl"],[1,"font-semibold","text-2xl"],[1,"flex","flex-col"],[1,"flex","gap-x-3"],["href",""],[1,"text-3xl","hover:text-blue-500",3,"icon"],[1,"text-3xl","hover:text-rose-500",3,"icon"],[1,"text-3xl",3,"icon"],["action","",1,"flex","flex-col","mt-3","gap-y-2"],["name","","id","","placeholder","Tu opinion",1,"text-black","focus:outline-none","pl-2","pr-2"],["type","email","name","","id","","placeholder","T\xFA correo electr\xF3nico",1,"text-black","focus:outline-none","p-2"],["type","submit",1,"bg-green-400","p-3","rounded-sm"],[1,"mt-10"]],template:function(a,i){a&1&&(o(0,"footer",0)(1,"div",1)(2,"div")(3,"p",2),r(4,"jhonblog"),t(),o(5,"p"),r(6,"Un sitio hecho por y para programadores"),t()(),o(7,"div")(8,"p",3),r(9,"Explora"),t(),o(10,"div",4)(11,"a"),r(12,"Acerca de"),t(),o(13,"a"),r(14,"Mi historia"),t(),o(15,"a"),r(16,"Mis proyectos"),t()()(),o(17,"div")(18,"p",3),r(19,"S\xEDgueme en:"),t(),o(20,"div",5)(21,"a",6),v(22,"fa-icon",7),t(),o(23,"a",6),v(24,"fa-icon",8),t(),o(25,"a",6),v(26,"fa-icon",9),t(),o(27,"a",6),v(28,"fa-icon",9),t()()(),o(29,"div")(30,"p",3),r(31,"\xBFTienes alguna opini\xF3n?"),t(),o(32,"form",10),v(33,"textarea",11)(34,"input",12),o(35,"button",13),r(36,"Enviar"),t()()()(),o(37,"p",14),r(38,"2024 Todos los derechos reservados."),t()()),a&2&&(l(22),m("icon",i.faFacebook),l(2),m("icon",i.faInstagram),l(2),m("icon",i.faGithub),l(2),m("icon",i.faXTwitter))},dependencies:[t1,I,F,E]})}return e})();var o2=(()=>{class e{csrfService;loginService;toastService;title="jhonblog-frontend";logeado=!1;user=null;permissions=null;constructor(c,a,i){this.csrfService=c,this.loginService=a,this.toastService=i}ngOnInit(){this.csrfService.getCsrfToken(),this.loginService.userLogged$.subscribe({next:c=>{c!=null?(this.logeado=this.loginService.isAutenticated(),this.user=c):(this.logeado=!1,this.user=null)}}),this.loginService.userPermissions$.subscribe({next:c=>{this.permissions=c},error:c=>{this.toastService.error(`Ha ocurrido un error al obtener los datos de los permisos desde login.service -> userPermissions$ ${c.message}`)}})}ngOnDestroy(){this.csrfService.tokenActual=""}static \u0275fac=function(a){return new(a||e)(h(N),h(b),h(g))};static \u0275cmp=u({type:e,selectors:[["app-root"]],decls:4,vars:3,consts:[[3,"logeado","actualUser","userPermissions"],[1,"relative"]],template:function(a,i){a&1&&(v(0,"app-header",0),o(1,"div",1),v(2,"router-outlet"),t(),v(3,"app-footer")),a&2&&m("logeado",i.logeado)("actualUser",i.user)("userPermissions",i.permissions)},dependencies:[R1,$1,t2]})}return e})();var n3="@",l3=(()=>{let n=class n{constructor(a,i,s,p,M){this.doc=a,this.delegate=i,this.zone=s,this.animationType=p,this.moduleImpl=M,this._rendererFactoryPromise=null,this.scheduler=C1(x1,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-DH76YQIG.js").then(i=>i)).catch(i=>{throw new v1(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let p=new s(this.delegate,this._engine,this.zone);return this.delegate=p,p})}createRenderer(a,i){let s=this.delegate.createRenderer(a,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let p=new p1(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(M=>{let s1=M.createRenderer(a,i);p.use(s1),this.scheduler?.notify(9)}).catch(M=>{p.use(s)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};n.\u0275fac=function(i){b1()},n.\u0275prov=q({token:n,factory:n.\u0275fac});let e=n;return e})(),p1=class{constructor(n){this.delegate=n,this.replay=[],this.\u0275type=1}use(n){if(this.delegate=n,this.replay!==null){for(let c of this.replay)c(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,c){return this.delegate.createElement(n,c)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,c){this.delegate.appendChild(n,c)}insertBefore(n,c,a,i){this.delegate.insertBefore(n,c,a,i)}removeChild(n,c,a){this.delegate.removeChild(n,c,a)}selectRootElement(n,c){return this.delegate.selectRootElement(n,c)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,c,a,i){this.delegate.setAttribute(n,c,a,i)}removeAttribute(n,c,a){this.delegate.removeAttribute(n,c,a)}addClass(n,c){this.delegate.addClass(n,c)}removeClass(n,c){this.delegate.removeClass(n,c)}setStyle(n,c,a,i){this.delegate.setStyle(n,c,a,i)}removeStyle(n,c,a){this.delegate.removeStyle(n,c,a)}setProperty(n,c,a){this.shouldReplay(c)&&this.replay.push(i=>i.setProperty(n,c,a)),this.delegate.setProperty(n,c,a)}setValue(n,c){this.delegate.setValue(n,c)}listen(n,c,a){return this.shouldReplay(c)&&this.replay.push(i=>i.listen(n,c,a)),this.delegate.listen(n,c,a)}shouldReplay(n){return this.replay!==null&&n.startsWith(n3)}};function n2(e="animations"){return V1("NgAsyncAnimations"),d1([{provide:H1,useFactory:(n,c,a)=>new l3(n,c,a,e),deps:[S1,A1,M1]},{provide:u1,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var l2=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=Q({type:e,bootstrap:[o2]});static \u0275inj=K({providers:[N,w1(),n2(),b,R,r1],imports:[Z1,Q1,B1,O1,T1.forRoot({timeOut:1e4,positionClass:"toast-bottom-right"}),D1.forRoot({provideSwal:()=>import("./chunk-NPBJGPN4.js").then(({default:c})=>c.mixin({confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",animation:!1}))}),j1]})}return e})();k1().bootstrapModule(l2,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
